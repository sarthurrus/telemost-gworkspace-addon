# telemost-gworkspace-addon

Это дополнение для Google Workspace, которое позволяет пользователям создавать встречи в Яндекс.Телемосте прямо из интерфейса Google Календаря.

## Возможности

- Прямая интеграция: Добавляет кнопку "Yandex Telemost" в окно создания события Google Календаря.
- Автоматическая генерация ссылок на ВКС: Автоматически создает уникальную ссылку на встречу в Яндекс.Телемосте и прикрепляет её к событию. Организатором является учетная запись, чей токен используется. Соорганизатор – тот, кто создал событие в календаре.
- Корпоративное использование: Предназначено для приватной публикации внутри вашей Google Workspace организации.

## Прежде чем начать

Убедитесь, что у вас есть:

1. Права администратора Google Workspace: Необходимы для публикации и установки дополнения для всей организации.
2. Аккаунт Яндекса c подключенным Яндекс360 для Бизнеса: Нужен для получения OAuth-токена.
3. OAuth-токен Яндекса: Действительный токен для доступа к API Яндекс.Телемоста. [Инструкция по получению токена](https://yandex.ru/dev/telemost/doc/ru/access)

## Шаг 1. Подготовка AppScript

1. Создайте новый AppScript проект в вашем Google Workspace: script.google.com
2. Зайдите в Настройки проекта, активируйте флаг "Показывать файл манифеста appsscript.json в редакторе"
3. Скопируйте appscript.json.template из текущего репозитория в файл appscript.json
4. Скопируйте code.js.template из текущего репозитория в файл code.js

## Шаг 2: Настройка проекта Google Cloud

1. Создайте новый проект в (Google Cloud Platform)[https://console.cloud.google.com/]:

2. Включите нужные API:

- Перейдите в раздел "API и сервисы" -> "Библиотека".
- Найдите и включите "Google Workspace Marketplace SDK".
- Настройте экран согласия OAuth:
    - Перейдите в "API и сервисы" -> "Экран согласия OAuth".
    - Выберите тип пользователя "Внутренний" (Internal) и нажмите "Создать".
    - Заполните обязательные поля (название приложения, email поддержки).
    - На шаге "Области" (Scopes) ничего добавлять не нужно — они автоматически подтянутся из манифеста.
    - Сохраните настройки.

## Шаг 3: Публикация дополнения

Теперь опубликуем дополнение, чтобы оно стало доступно для пользователей вашей организации.

1. Создайте рабочее развертывание:

- Вернитесь в редактор Apps Script.
- Перейдите в настройки, в разделе "Проект Google Cloud Platform (GCP)" выберите проект, созданный на шаге 2.
- Нажмите "Развертывание" -> "Новое развертывание".
- Выберите тип "Дополнение" (Add-on).
- Нажмите "Развернуть".
- Скопируйте появившийся "Идентификатор развертывания" (Deployment ID), он понадобится на следующем шаге.


2. Настройте Marketplace SDK:

- В Google Cloud Console перейдите в "API и сервисы" -> "Google Workspace Marketplace SDK" -> "Настройки приложения".
- Выберите "Приложение для внутреннего использования".
- Заполните все необходимые поля: название, описания, загрузите иконки (важно, чтобы они были доступны публично).
- В разделе "Идентификаторы проекта" укажите "Идентификатор развертывания" (Deployment ID).
- Создайте рабочее развертывание:
   - Вернитесь в редактор Apps Script.
   - Нажмите "Развертывание" -> "Новое развертывание".
   - Выберите тип "Дополнение" (Add-on).
   - Нажмите "Развернуть".

## Шаг 4: Установка для пользователей

После публикации администратор Google Workspace может установить дополнение для всех сотрудников.
- Откройте консоль администратора Google Workspace.
- Перейдите в "Приложения" -> "Приложения из Google Workspace Marketplace" -> "Список приложений".
- Нажмите "Установить приложение".
- Найдите ваше дополнение по названию. Так как оно внутреннее, оно будет доступно только вам.
- Установите его для всех пользователей или для определенной группы.
